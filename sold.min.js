var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).i}},"es6","es3");
var arr=[["Filiais",[["Gerente","s","s","text",0,["registros_repetidos","obrigatorio","formata_nome","code_free"]],["Telefone","n","s","text",0,["code_free"]],["Email","s","s","text",0,["email","code_free"]],["Endere\u00e7o Eletr\u00f4nico","s","s","text",0,["code_free"]],["registro","n","n","hidden",0,[]]],["alfa","nome"]],["Estoque",[["C\u00f3digo do Produto","s","s","text",5,["registros_repetidos","maiusculas","obrigatorio","codigo_auto"],"descricao"],["Descri\u00e7\u00e3o","s","s","text",0,["obrigatorio",
"formata_nome","registros_repetidos"]],["Quantidade em estoque","s","s","text",0,["obrigatorio","quantidade"]],["Valor","s","s","text",0,["obrigatorio","dinheiro"]],["registro","n","n","hidden",0,[]]],["alfa","descricao"]],["Clientes",[["Nome","s","s","text",0,["registros_repetidos","obrigatorio","formata_nome"]],["Endere\u00e7o","s","s","text",0,["formata_nome"]],["Telefone","s","s","text",0,["telefone"]],["Email","s","s","text",0,["email"]],["registro","n","n","hidden",0,[]]],["alfa","nome"]],["Vendedores",
[["Nome","s","s","text",0,["registros_repetidos","obrigatorio","formata_nome"]],["C\u00f3digo","s","s","text",5,["maiusculas","obrigatorio","registros_repetidos","codigo_auto"]],["Data de Admiss\u00e3o","s","s","date",0,["data"]],["Cargo","s","s","text",0,["formata_nome"]],["registro","n","n","hidden",0,[]]],["alfa","nome"]],["Vendas",[["Filial","s","s",["select","filiais","gerente","alfa"],0,[]],["Data da Venda","s","s","hidden",0,["data_auto"]],["Hor\u00e1rio","s","s","hidden",0,["hora_auto"]],
["Vendedor","s","s",["select","vendedores","nome","alfa"],0,[]],["Cliente","s","s",["select","clientes","nome","alfa"],0,[]],["Produtos","n","s","nota estoque descricao valor quantidade_em_estoque valor_total".split(" "),0,["obrigatorio"]],["Valor Total","s","s","hidden",0,["dinheiro"]],["edicao_data","n","n","hidden",0,[]],["registro","n","n","hidden",0,[]]],["data"]],["Relat\u00f3rio",[["Importar Dados","s","s","text",0,["obrigatorio"]],["registro","n","n","hidden",0,[]]],["alfa"]]];
function bancoHTML(a,b,c,d,e,f,g){switch(b){case "select-tela-wrapper":return'<h1><img src=droga.png></h1>\n\t\t\n\t\t<button class="class_menu" onclick="document.getElementById(\'select-tela\').value = \'estoque\'; selecionaTela();">Estoque</button>\n\t\t\n\t\t<button class="class_menu" onclick="document.getElementById(\'select-tela\').value = \'filiais\'; selecionaTela();" id="default">Filiais</button>\n\t\t\n\t\t<button class="class_menu" onclick="document.getElementById(\'select-tela\').value = \'vendedores\'; selecionaTela();">Vendedor</button>\n\t\t\n\t\t<button class="class_menu" onclick="document.getElementById(\'select-tela\').value = \'clientes\'; selecionaTela();">Cliente</button>\n\t\t\n\t\t<button class="class_menu" onclick="document.getElementById(\'select-tela\').value = \'vendas\'; selecionaTela();">Vendas</button>\n\t\t\n\t\t<button class="class_menu" onclick="document.getElementById(\'select-tela\').value = \'admin\'; selecionaTela();">Relat\u00f3rios</button>\n\t\t\n\t\t<button onclick="insereRegistro();" id="botao-insere-registro">Inserir novo cadastro</button>\n\t\t<input type="hidden" id="select-tela" onchange="selecionaTela();" value="vendedores">';
case "select-tela":return"";case "cria-cabecalho-wrapper":return'<tr class="formatacao_tabela">'+a+"</tr>";case "cria-cabecalho":return"s"===a[1]?"<th>"+a[0].replace(/\s/g,"&nbsp;")+"</th>":"";case "cabecalho-erro":return'<th><span class="lista lista-cabecalho">Estes campos est\u00e3o vazios.<span></th>';case "cria-lista-wrapper":return'<tr class="lista-linha-pointer" id="'+d.registro+'"  onclick="visualizaRegistro('+d.registro+');">'+a+"</tr>";case "cria-linha-lista":return d="","s"===e[1]&&(a=c[a],
-1<e[5].indexOf("dinheiro")&&(a=formataDinheiro(a)),d+="<td>"+a.replace(/\s/g,"&nbsp;")+"</td>"),d;case "lista-erro":return'<p><span class="lista">Esta lista est\u00e1 vazia.</span></p>';case "lista-navegacao-":return'<span style="cursor: pointer;" onclick="selecionaTela('+(a-1)+')">&#9664;</span> ';case "lista-navegacao+":return' <span style="cursor: pointer;"  onclick="selecionaTela('+(a+1)+')">&#9654;</span> ';case "lista-navegacao-message":return'<div style="margin:auto; text-align:center;width:100%;margin-top:10px;">'+
c+" Exibindo resultados "+(10*(a-1)+1)+" a "+d+" de "+e+". "+f+"</div>";case "visualiza-registro-wrapper":return'<div id="ver-cadastro-wrapper"><div id="ver-cadastro-titulo"><span>Ver cadastro em&nbsp;<strong>'+c+"</strong></span></div>"+a+'<div id="botoes-ver-cadastro"><button onclick="selecionaTela();">Voltar a  Lista</button> &nbsp;<button onclick="editarCadastro('+d+');">Editar</button> &nbsp;<button onclick="apagaRegistro('+d+');">Apagar</button></div><div><span id="aviso"></span></div></div>';
case "imprime-registro":return f="","edicao_data"===a[0]&&""!==c[e]&&(f='<div id="alteracao-registro-aviso"><span id="edita-aviso-texto">* '+c[e]+"<span></div>"),"s"===a[2]&&(f=c[e],-1<a[5].indexOf("dinheiro")&&(f=formataDinheiro(f)),f='<div class="ver-cadastro-linha"><span class="titulo-registro">'+a[0]+':</span><span  class="visualizar-registro visualizar-'+d+'">'+f+"</span></div>"),f;case "insere-registro-wrapper":return'<div id="ver-cadastro-wrapper"><div id="ver-cadastro-titulo"><span>Inserir novo cadastro em&nbsp;<strong>'+
c+"</strong></span></div>"+a+'<div id="botoes-ver-cadastro"><button onclick="gravaRegistro();" id="insere_ok">OK</button>&nbsp; <button onclick="selecionaTela();" id="insere_cancela">Cancelar</button></div><div><span id="aviso"></span></div></div>';case "insere-registro":return f="","hidden"!==a[3]&&(f=a[0]+": "),e=setAttrInputMod(e,c,a),"hidden"===a[3]||"nota"===a[3][0]?e:'<div class="ver-cadastro-linha"><span class="titulo-registro">'+f+'</span><span  class="visualizar-registro visualizar-'+d+'">'+
e+"</span></div>";case "edita-registro-wrapper":return'<div id="ver-cadastro-wrapper"><div id="ver-cadastro-titulo"><span>Editar cadastro em&nbsp;<strong>'+c+"</strong></span></div>"+a+'<div id="botoes-ver-cadastro"><button onclick="gravaAlteracao('+d+');" id="insere_ok">OK</button> &nbsp;<button onclick="visualizaRegistro('+d+');" id="insere_cancela">Cancelar</button></div><div><span id="aviso"></span></div></div>';case "edita-registro":return b="","hidden"!==a[3]&&(b=a[0]+": "),c=setAttrInputMod(e,
d,a,c[e],f),"hidden"===a[3]?c:"nota"===a[3][0]?(testeNota=[1,e,a[3][5],a[3][1],a[3][2],a[3][4]],c):'<div class="ver-cadastro-linha"><span class="titulo-registro">'+b+'</span><span class="visualizar-registro">'+c+"</span></div>";case "apagar-registro":return'<div id="ver-cadastro-wrapper"><div id="ver-cadastro-titulo"><span>Apagar cadastro em&nbsp;<strong>'+c+"</strong></span></div>"+a+'<div id="botoes-ver-cadastro">Confirma apagar este registro?&nbsp;<button onclick="confirmaApagar('+d+", '"+c+'\');">OK</button>&nbsp;<button onclick="visualizaRegistro('+
d+');">Cancelar</button></div></div><br>';case "apagar-confirma":return'<div id="ver-cadastro-wrapper"><div id="ver-cadastro-titulo"><span>Apagar cadastro em&nbsp;<strong>'+a+'</strong></span></div><div id="apagar-confirma-mensagem"><br>Item apagado.</div><div id="botoes-ver-cadastro"><button onclick="selecionaTela();">OK</button></div></div>';case "select-attribute-wrapper":return'<select class="formularios inserir-form-'+c+'"  id="form-'+d+'">'+a+"</select>";case "select-attribute":return e="",
a===c&&(e="selected"),'<option value="'+a+'" '+e+">"+a+"</option>";case "input-attribute":return"date"===a[3]&&e&&(e=organizaInputData(e)),f=a[3],b="",0<a[4]&&(b=' maxlength="'+a[4]+'" '),a="",e&&(a='value="'+e+'"'),'<input type="'+f+'"'+b+'class="formularios inserir-form-'+c+'" id="form-'+d+'" '+a+">";case "campo-vazio":return"Campo "+a[0]+" vazio.<br>";case "obrigatorio":return"<strong>"+a+"</strong> \u00e9 obrigat\u00f3rio.<br>";case "obrigatorio-quantidade":return"<strong>Quantidade</strong> inv\u00e1lida. Os valores devem ser inseridos ou em unidades ou em kg, marcando as casas decimais com um ponto. Ex: 3 ou 3.412 <br>";
case "obrigatorio-dinheiro":return"<strong>"+a+"</strong> inv\u00e1lido. Os valores devem ser inseridos sem v\u00edrgula, e marcando os centavos com pontos. Ex: 1400.00<br>";case "obrigatorio-registros-repetidos":return"Registro de <strong>"+a+"</strong> j\u00e1 existe.<br>";case "validador-email":return"<strong>Email</strong> n\u00e3o parece v\u00e1lido.<br>";case "validador-telefone":return"<strong>Telefone</strong> n\u00e3o parece v\u00e1lido. Formatos aceitos s\u00e3o: (99)99999-9999, 99 999999999, 99999999999, 99999-9999, 999999999, 99 99999-9999.<br>";
case "validador-data":return"<strong>Data</strong> n\u00e3o \u00e9 v\u00e1lida.";case "edicao_data":return"<em>Editado em "+a;case "edicao_hora":return" \u00e0s "+a+".</em>"}}
function bancoHTMLVendas(a,b,c,d,e){switch(b){case "vendas-wrapper":return'<div class="ver-cadastro-linha"><span class="titulo-registro">Produtos: </span><span  class="visualizar-registro">'+a;case "select-produtos":return'<option value="'+a+'">'+a+"</option>";case "select-produtos-wrapper":return'<select class="formularios inserir-form-'+c[0]+'"  id="produtos">'+a+'</select></span></div><div class="ver-cadastro-linha"><span class="titulo-registro">Quantidade: </span><span class="visualizar-registro inserir-form-'+
c[1]+'"><input type="number" min="0" id="quant-produto"> <input type="button" value="Inserir" id="inserir-produto" onclick="vendasInserir('+c[2]+", '"+c[3]+"', '"+c[4]+"', '"+c[5]+"', '"+c[6]+"', '"+c[7]+"', '"+c[8]+"');\"></span></div>";case "insere-campos":return d="",e="R$ 0.00",a&&(d=a,a=buscaPosicaoMod(document.getElementById("select-tela").value),e=indexCadastroMod(c[0]),e=formataDinheiro(objetos[a].valores[e][c[1]])),'<div class="ver-cadastro-linha"><span class="titulo-registro">Descri\u00e7\u00e3o da venda:</span><span></span></div><div id="nota-linha"><span id="nota">'+
d+'</span><input type="hidden" class="inserir-form-'+c[2]+'" id="form-'+c[3]+'" value="'+d+'"></div><div class="ver-cadastro-linha"><span class="titulo-registro">Valor Total: </span><span id="total"  class="visualizar-registro inserir-form-'+b[2]+'">'+e+"</span></div>";case "insere-venda":return"<span class='nota-entry' id='"+a.registro+"' onmouseenter='selecionaProdutoVenda(\""+a.registro+'", "'+c[0]+'", "'+c[1]+"\");' onmouseleave='tiraSelecao(\""+a.registro+"\");'>"+a.quantidade+"x "+a.produto+
" - Unidade: "+formataDinheiro(a.preco)+" - Total: "+formataDinheiro(a.total)+"</span>";case "botao-apagar":return'<input type="button" onclick="apagarRegistroVenda('+a+", '"+c+"', '"+d+'\');" value="Apagar" class="botaoApagarVenda" id="apagar_venda">';case "testa-quantidade":return"<strong>Quantidade</strong> inv\u00e1lida. Valores v\u00e1lidos s\u00e3o n\u00fameros inteiros ou com ponto dividindo os valores decimais para produtos vendidos por quilogramas. Ex. 1 ou 1.000";case "estoque-check":return"<strong>Quantidade</strong> maior do que em estoque."}}
function Repetidora(a,b,c,d,e,f,g,h){h="";for(var k=0;k<a.length;k++)h=void 0!==e?h+bancoHTML(a[k],b,c,d,e[k],f,g):h+bancoHTML(a[k],b,c);return h}
for(var objetos=[],registros_apagados=[],registro_entrada=0,i=0;i<arr.length;i++){var lista={};lista.nome=arr[i][0];lista.id=arr[i][0].toString().toLowerCase().replace(/\s+/g,"_").normalize("NFD").replace(/[\u0300-\u036f]/g,"");lista.valores=[];lista.campos=[];lista.camposid=[];lista.org_lista=arr[i][2];for(var funcao="",j=0;j<arr[i][1].length;j++){lista.campos.push(arr[i][1][j]);var entrada=arr[i][1][j][0].toString().toLowerCase().replace(/\s+/g,"_").normalize("NFD").replace(/[\u0300-\u036f]/g,"");
lista.camposid.push(entrada);funcao+="this."+entrada+" = valores["+j+"]; "}lista.gravador=new Function("valores",funcao);objetos.push(lista)}function selectTelaStart(){var a=Repetidora(objetos,"select-tela");document.getElementById("topo").innerHTML=bancoHTML(a,"select-tela-wrapper")}selectTelaStart();function selecionaTela(a){document.getElementById("select-tela").setAttribute("onchange","selecionaTela();");"admin"===document.getElementById("select-tela").value?telaAdmin():criaLista(a)}
function variaveisMod(){var a=document.getElementById("select-tela").value;a=buscaPosicaoMod(a);var b=[];b.push(objetos[a].valores,objetos[a].campos.length,objetos[a].id,objetos[a].campos,objetos[a].camposid,objetos[a].nome,objetos[a].org_lista);return b}function gravadorMod(a,b){a=buscaPosicaoMod(a);b=new objetos[a].gravador(b);objetos[a].valores.push(b)}function buscaPosicaoMod(a){return objetos.map(function(a){return a.id}).indexOf(a)}
function selecionaCadastroMod(a){var b=document.getElementById("select-tela").value;b=buscaPosicaoMod(b);return objetos[b].valores.filter(function(b){return b.registro==a})}function indexCadastroMod(a){var b=document.getElementById("select-tela").value;b=buscaPosicaoMod(b);return objetos[b].valores.map(function(a){return parseInt(a.registro)}).indexOf(a)}
function organizaListaMod(a,b){a=[].concat($jscomp.arrayFromIterable(a));switch(b[0]){case "alfa":a.sort(function(a,d){return a[b[1]].localeCompare(d[b[1]])});break;case "data":a.reverse()}return a}function separaResultadosListaMod(a,b){void 0===a&&(a=1);var c=10*(a-1),d=b.length,e="";if(10<d){10*a<d&&(d=10*a);var f,g;0<c?f=bancoHTML(a,"lista-navegacao-"):f="";d<b.length?g=bancoHTML(a,"lista-navegacao+"):g="";e=bancoHTML(a,"lista-navegacao-message",f,d,b.length,g)}return[c,d,e]}
function imprimeVisualizacaoRegistroMod(a,b,c,d){return Repetidora(c,"imprime-registro",a[0],d,b)}function setAttrInputMod(a,b,c,d,e){return"select"===c[3][0]?(e=buscaPosicaoMod(c[3][1]),e=objetos[e].valores.map(function(a){return a[c[3][2]]}),e=organizaListaMod(e,[c[3][3],"0"]),d=Repetidora(e,"select-attribute",d),bancoHTML(d,"select-attribute-wrapper",b,a)):"nota"===c[3][0]?imprimeCamposNota(c,b,d,e,a):bancoHTML(c,"input-attribute",b,a,d)}
function criaLista(a){var b=variaveisMod(),c=b[0],d=b[2],e=b[3],f=b[4],g=b[6];document.getElementById("botao-insere-registro").style.display="initial";b=criaCabecalhoLoc(e,d);a=criaListaLoc(c,a,d,f,e,g);document.getElementById("principal").innerHTML='<table id="estoquetabela">'+b+a+"</table>"}function criaCabecalhoLoc(a,b){if(0===a.length)return bancoHTML("","cabecalho-erro");a=Repetidora(a,"cria-cabecalho");return bancoHTML(a,"cria-cabecalho-wrapper",b)}
function criaListaLoc(a,b,c,d,e,f){if(0===a.length)return bancoHTML("","lista-erro");a=organizaListaMod(a,f);d=Object.keys(a[0]);f="";b=separaResultadosListaMod(b,a);for(var g=b[0];g<b[1];g++){var h=Repetidora(d,"cria-linha-lista",a[g],c,e);f+=bancoHTML(h,"cria-lista-wrapper",c,a[g])}return f+b[2]}
function visualizaRegistro(a,b){var c=selecionaCadastroMod(a),d=variaveisMod(),e=d[2],f=d[3],g=d[4];d=d[5];document.getElementById("botao-insere-registro").style.display="none";a=bancoHTML(imprimeVisualizacaoRegistroMod(c,g,f,e),"visualiza-registro-wrapper",d,a);document.getElementById("principal").innerHTML=a;b&&(document.getElementById("aviso").innerHTML+=b)}
function insereRegistro(){document.getElementById("botao-insere-registro").style.display="none";var a=variaveisMod(),b=a[5];a=Repetidora(a[3],"insere-registro",a[2],"",a[4]);document.getElementById("principal").innerHTML=bancoHTML(a,"insere-registro-wrapper",b)}var testeNota=[];
function editarCadastro(a){var b=selecionaCadastroMod(a),c=variaveisMod(),d=c[2],e=c[3],f=c[4];c=c[5];document.getElementById("principal").innerHTML=bancoHTML(imprimeCamposLoc(e,f,d,b,a),"edita-registro-wrapper",c,a);1===testeNota[0]&&(imprimeNotaLoc(testeNota[1],testeNota[2]),b=buscaPosicaoMod(testeNota[3]),atualizaBotoesLoc(testeNota[4],b,testeNota[5],a),testeNota=[])}function imprimeCamposLoc(a,b,c,d,e){return Repetidora(a,"edita-registro",d[0],c,b,e)}
function apagaRegistro(a){var b=selecionaCadastroMod(a),c=variaveisMod(),d=c[2],e=c[3],f=c[4];c=c[5];document.getElementById("principal").innerHTML=bancoHTML(imprimeVisualizacaoRegistroMod(b,f,e,d),"apagar-registro",c,a)}function gravaRegistro(){reg=registro_entrada++;document.getElementById("form-registro").value=reg;var a=organizaDadosEntrada();void 0!==a&&(gravaRegistroLoc(a[0]),visualizaRegistro(reg,a[2]+a[1]))}
function gravaRegistroLoc(a){var b=buscaPosicaoMod(document.getElementById("select-tela").value);a=new objetos[b].gravador(a);objetos[b].valores.push(a)}
function organizaDadosEntrada(a){document.getElementById("aviso").innerHTML="";var b=variaveisMod(),c=b[3];b=b[4];var d=[],e="",f="",g="";document.getElementById("form-edicao_data")&&(document.getElementById("form-edicao_data").value="");for(var h=0;h<b.length;h++){var k=document.getElementById("form-"+b[h]).value;k=formatadorEntrada(c[h],k,b[h]);e+=validadorEntrada(c[h],k);f+=validadoresObrigatorios(c[h],k,b[h],a);d.push(k);""===document.getElementById("form-"+b[h]).value&&"registro"!==b[h]&&"edicao_data"!==
b[h]&&(g+=bancoHTML(c[h],"campo-vazio"))}if(""!==f){for(a=0;a<b.length;a++)-1<c[a][5].indexOf("data_auto")&&(document.getElementById("form-"+b[a]).value=""),-1<c[a][5].indexOf("hora_auto")&&(document.getElementById("form-"+b[a]).value=""),-1<c[a][5].indexOf("codigo_auto")&&(document.getElementById("form-"+b[a]).value="");document.getElementById("aviso").innerHTML=f+g+e}else return[d,e,g]}
function gravaAlteracao(a){document.getElementById("form-registro").value=a;var b=indexCadastroMod(a),c=organizaDadosEntrada(b);if(void 0!==c){var d=buscaPosicaoMod(document.getElementById("select-tela").value),e=new objetos[d].gravador(c[0]);objetos[d].valores[b]=e;visualizaRegistro(a,c[2]+c[1])}}
function confirmaApagar(a,b){var c=buscaPosicaoMod(document.getElementById("select-tela").value);a=indexCadastroMod(a);registros_apagados.push(objetos[c].valores.splice(a,1));document.getElementById("principal").innerHTML=bancoHTML(b,"apagar-confirma")}
function validadoresObrigatorios(a,b,c,d){var e=variaveisMod(),f="";switch(!0){case -1<a[5].indexOf("obrigatorio")&&""===b:f+=bancoHTML(a[0],"obrigatorio");break;case -1<a[5].indexOf("quantidade")&&(1==testaNumero(b)||""===b):f+=bancoHTML(a[0],"obrigatorio-quantidade");break;case -1<a[5].indexOf("dinheiro")&&!1===testaDinheiro(b):f+=bancoHTML(a[0],"obrigatorio-dinheiro");break;case -1<a[5].indexOf("registros_repetidos")&&!0===registrosRepetidos(b,c,e[0])&&(void 0===d||e[0][d][c]!==b):f+=bancoHTML(a[0],
"obrigatorio-registros-repetidos")}return f}function validadorEntrada(a,b){var c="";switch(!0){case -1<a[5].indexOf("email")&&!1===testaEmail(b):c+=bancoHTML(a[0],"validador-email");break;case -1<a[5].indexOf("telefone")&&!1===testaTelefone(b):c+=bancoHTML(a[0],"validador-telefone");break;case -1<a[5].indexOf("data")&&""===b:c+=bancoHTML(a[0],"validador-data")}return c}
function formatadorEntrada(a,b,c){b=limpaEntrada(b);-1<a[5].indexOf("code_free")&&(b=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));switch(!0){case -1<a[5].indexOf("data_auto"):a=(new Date).toLocaleDateString();""!==document.getElementById("form-"+c).value&&document.getElementById("form-edicao_data")?b=edicaoData("data",organizaData(a),c):(document.getElementById("form-"+c).value=a,b=organizaData(a));break;case -1<a[5].indexOf("hora_auto"):b=
(new Date).toLocaleTimeString();""!==document.getElementById("form-"+c).value&&document.getElementById("form-edicao_data")?b=edicaoData("hora",b,c):document.getElementById("form-"+c).value=b;break;case -1<a[5].indexOf("codigo_auto")&&""===document.getElementById("form-"+c).value:b=codigoAutomatico(a[6],c);break;case -1<a[5].indexOf("maiusculas"):b=entradaMaiusculas(b);break;case -1<a[5].indexOf("formata_nome"):b=formataNome(b);break;case -1<a[5].indexOf("data"):b=organizaData(b)}return b}
function formataDinheiro(a){return"R$ "+a.replace(/\d(?=(\d{3})+\.)/g,"$&,")}function entradaMaiusculas(a){return a.toUpperCase()}function testaEmail(a){return/\S+@\S+/.test(a)}function testaNumero(a){return isNaN(a)}function testaDinheiro(a){return/^\d+(?:\.\d{2})$/.test(a)}function testaTelefone(a){return RegExp("^("+"(99)9999-99999|99 99999999|99999999999|9999-99999|99999999|99 9999-99999|(99) 999999999".replace(/([\(\)])/g,"\\$1").replace(/9/g,"\\d")+")$").test(a)}
function formataNome(a){a=a.split(" ");for(var b="de da do das dos nas nos na no em a o e as os \u00e0 \u00e0s CEP".split(" "),c=0;c<a.length;c++)0>b.indexOf(a[c])&&(a[c]=a[c].charAt(0).toUpperCase()+a[c].substring(1));return a.join(" ")}function limpaEntrada(a){return a.trim()}function organizaData(a){return a.split("-").reverse().join("/")}function organizaInputData(a){return a.split("/").reverse().join("-")}function registrosRepetidos(a,b,c){return c.some(function(c){return c[b]===a})}
function edicaoData(a,b,c){switch(!0){case "data"===a:return document.getElementById("form-edicao_data").value+=bancoHTML(b,"edicao_data"),document.getElementById("form-"+c).value;case "hora"===a:return document.getElementById("form-edicao_data").value+=bancoHTML(b,"edicao_hora"),document.getElementById("form-"+c).value}}
function codigoAutomatico(a,b){var c=buscaPosicaoMod(document.getElementById("select-tela").value);c=objetos[c].valores.map(function(a){return a[b]});var d=1,e=1;e=9>=d?"0"+d:d;for(e=document.getElementById("form-"+a).value.substring(0,2).toUpperCase()+e;-1<c.indexOf(e);)e=9>=d?"0"+d:d,e=document.getElementById("form-"+a).value.substring(0,2).toUpperCase()+e,d+=1;return document.getElementById("form-"+b).value=e}
function RepetidoraVendas(a,b,c,d,e,f,g){for(var h="",k=0;k<a.length;k++)h=void 0!==e?h+bancoHTMLVendas(a[k],b,c,d,e[k],f,g):h+bancoHTMLVendas(a[k],b,c,d);return h}var vendasBuffer=[],registroVendas=0,estoque_temp=[],estoque_produto,estoque_quantidade;
function atualizaBotoesLoc(a,b,c,d){var e="atualizaEstoque('"+a+"', '"+b+"', '"+c+"'); vendasBuffer = []; estoque_temp = []; gravaRegistro();";0<d&&(e="atualizaEstoque('"+a+"', '"+b+"', '"+c+'\'); vendasBuffer = []; if (document.getElementById("nota").innerHTML !== "") { estoque_temp = []; }; gravaAlteracao('+d+");");document.getElementById("insere_ok").setAttribute("onclick",e);0<=d?e="vendasBuffer = []; estoque_temp = []; visualizaRegistro("+d+");":e="vendasBuffer = []; estoque_temp = []; selecionaTela();";
document.getElementById("insere_cancela").setAttribute("onclick",e);e="vendasBuffer = []; estoque_temp = []; selecionaTela();";document.getElementById("select-tela").setAttribute("onchange",e)}
function tratadorNota(a,b){switch(b){case "imprime-nota":return a.replace(/ class=\'nota-entry\'/g,"").replace(/ id=\'\d+\'/g,"").replace(/ onmouseenter=\'selecionaProdutoVenda\(\"\d+\"\, \"\w+\"\, \"\w+\"\)\;\'/g,"").replace(/ onmouseleave\=\'tiraSelecao\(\"\d+\"\)\;\'/g,"");case "atualiza-buffer":return a.replace("x","$$$-;!").replace(" - Unidade: R$ ","$$$-;!").replace(" - Total: R$ ","$$$-;!").split("$$-;!")}}
function imprimeCamposNota(a,b,c,d,e){var f=a[3][1];estoque_produto=a[3][2];var g=a[3][3];estoque_quantidade=a[3][4];a=a[3][5];vendasBuffer=[];registroVendas=0;estoque_temp=[];var h=buscaPosicaoMod(f),k=organizaListaMod(objetos[h].valores.map(function(a){return a[estoque_produto]}),["alfa","0"]);k=bancoHTMLVendas(RepetidoraVendas(k,"select-produtos"),"select-produtos-wrapper",[b,b,h,estoque_produto,g,estoque_quantidade,d,e,a,f]);k+=bancoHTMLVendas(c,"insere-campos",[d,a,b,e]);void 0!==c&&atualizaVendasBufferLoc(c,
f,estoque_produto);return bancoHTMLVendas(k,"vendas-wrapper")}
function atualizaVendasBufferLoc(a,b,c){pos=buscaPosicaoMod(b);a=a.replace(/<br>/g,"").replace(/<span>/g,"").split("</span>");a.pop();b={};for(var d=0;d<a.length;b={objeto:b.objeto},d++)if(b.objeto=tratadorNota(a[d],"atualiza-buffer"),b.objeto[1]=b.objeto[1].trim(),criaObjetoVendasLoc(b.objeto[0],b.objeto[1],b.objeto[2]),0>estoque_temp.findIndex(function(a){return function(b){return b[c]===a.objeto[1]}}(b))&&0<=objetos[pos].valores.findIndex(function(a){return function(b){return b[c]===a.objeto[1]}}(b))){var e=
objetos[pos].valores.findIndex(function(a){return function(b){return b[c]===a.objeto[1]}}(b));e=JSON.parse(JSON.stringify(objetos[pos].valores[e]));estoque_temp.push(e)}}
function imprimeNotaLoc(a,b){for(var c="",d="",e=0,f=0;f<vendasBuffer.length;f++)0!==f&&(d="<br>"),c+=d+bancoHTMLVendas(vendasBuffer[f],"insere-venda",[a,b]),e=(parseFloat(e)+parseFloat(vendasBuffer[f].total)).toFixed(2);document.getElementById("nota").innerHTML=c;document.getElementById("form-"+a).value=tratadorNota(c,"imprime-nota");""===document.getElementById("nota").innerHTML?(document.getElementById("form-"+b).value=0,document.getElementById("total").innerHTML="R$ 0.00"):(document.getElementById("form-"+
b).value=e,e=formataDinheiro(e),document.getElementById("total").innerHTML=e)}function criaObjetoVendasLoc(a,b,c){var d={};d.quantidade=a;d.produto=b;d.preco=c;d.registro=registroVendas++;d.total=(parseFloat(a)*parseFloat(c)).toFixed(2);vendasBuffer.push(d)}
function atualizaEstoque(a,b,c){if(""!==document.getElementById("nota").innerHTML&&!0===validadoresObrigatoriosVendas())for(var d={i$12:0};d.i$12<estoque_temp.length;d={i$12:d.i$12},d.i$12++){var e=objetos[b].valores.findIndex(function(b){return function(c){return c[a]===estoque_temp[b.i$12][a]}}(d));objetos[b].valores[e]=estoque_temp[d.i$12];0>parseFloat(objetos[b].valores[e][c])&&(objetos[b].valores[e][c]="0")}}
function vendasInserir(a,b,c,d,e,f,g){atualizaBotoesLoc(b,a,d,e);document.getElementById("aviso").innerHTML="";e=document.getElementById("quant-produto").value;var h=document.getElementById("produtos").value;!0===testaNumero(e)||""===e||0>=e?document.getElementById("aviso").innerHTML=bancoHTMLVendas("","testa-quantidade"):!1!==checaQuantidadeLoc(a,b,e,d,h)&&(validadoresObrigatoriosVendas(f),a=objetos[a].valores.filter(function(a){return a[b]===h})[0][c],criaObjetoVendasLoc(e,h,a),imprimeNotaLoc(f,
g),document.getElementById("quant-produto").value="",document.getElementById("nota").scrollTop=document.getElementById("nota").scrollHeight)}
function checaQuantidadeLoc(a,b,c,d,e){if(0>estoque_temp.findIndex(function(a){return a[b]===e})){var f=objetos[a].valores.findIndex(function(a){return a[b]===e});a=JSON.parse(JSON.stringify(objetos[a].valores[f]));estoque_temp.push(a)}a=estoque_temp.findIndex(function(a){return a[b]===e});if(parseFloat(c)>parseFloat(estoque_temp[a][d]))return document.getElementById("aviso").innerHTML=bancoHTMLVendas("","estoque-check"),!1;estoque_temp[a][d]=(parseFloat(estoque_temp[a][d])-parseFloat(c)).toString();
return!0}function selecionaProdutoVenda(a,b,c){document.getElementById(a).style.backgroundColor="#DDEFDE";document.getElementById(a).innerHTML+=bancoHTMLVendas(a,"botao-apagar",b,c)}function tiraSelecao(a){document.getElementById(a).style.backgroundColor="";document.getElementById(a).removeChild(document.getElementById("apagar_venda"))}
function apagarRegistroVenda(a,b,c){if(""!==document.getElementById("nota").innerHTML){var d=vendasBuffer.findIndex(function(b){return b.registro===a});vendasBuffer.splice(d,1);var e=document.getElementById(a).innerHTML.split("<input type");e.pop();e=e.join();e=e.replace("x","$$$-;!").replace(" - Unidade: R$ ","$$$-;!").replace(" - Total: R$ ","$$$-;!").split("$$-;!");e[1]=e[1].trim();d=estoque_temp.findIndex(function(a){return a[estoque_produto]===e[1]});0<=d&&(estoque_temp[d][estoque_quantidade]=
(parseFloat(estoque_temp[d][estoque_quantidade])+parseFloat(e[0])).toString());imprimeNotaLoc(b,c)}}function validadoresObrigatoriosVendas(a){document.getElementById("aviso").innerHTML="";var b=variaveisMod(),c=b[3];b=b[4];for(var d="",e=0;e<b.length;e++){var f=document.getElementById("form-"+b[e]).value;-1<c[e][5].indexOf("obrigatorio")&&""===f&&b[e]!==a&&(d+=bancoHTML(c[e][0],"obrigatorio"))}return""!==d?(document.getElementById("aviso").innerHTML=d,!1):!0}
function telaAdmin(){document.getElementById("botao-insere-registro").style.display="none";document.getElementById("principal").innerHTML='<input type="button" value="Exportar CSV Vendas" onclick="convertToCSV();"><br><br>Relat\u00f3rios:<br> ';vendasEstatisticas()}
function arrayEstatisticas(){var a=JSON.parse(JSON.stringify(objetos[4].valores));for(var b=0;b<a.length;b++){delete a[b].registro;var c=[],d=a[b].produtos;d=d.replace(/<br>/g,"").replace(/<span>/g,"").split("</span>");d.pop();for(var e=0;e<d.length;e++)d[e]=d[e].replace("x","$$$-;!").replace(" - Unidade: R$ ","$$$-;!").replace(" - Total: R$ ","$$$-;!").split("$$-;!"),d[e][1]=d[e][1].trim(),c.push(d[e]);a[b].produtos=c}return JSON.stringify(a)}
function convertToCSV(){var a=JSON.parse(arrayEstatisticas());if(0!==a.length){for(var b="",c=Object.keys(a[0]),d=0;d<c.length;d++)b+='"'+c[d]+'",';b=b.slice(0,-1);b+="\r\n";for(c=0;c<a.length;c++){d="";for(var e in a[c])""!=d&&(d+=","),d+='"'+a[c][e]+'"';b+=d+"\r\n"}a=document.createElement("a");a.setAttribute("href","data:text/csv;charset=utf-8,%EF%BB%BF"+b);a.setAttribute("download","vendas.csv");a.style.visibility="hidden";document.body.appendChild(a);a.click();document.body.removeChild(a)}}
function vendasEstatisticas(){document.getElementById("principal").innerHTML+='\n\n<input type="button" onclick="est_ven_cliente();" value="Vendas por cliente"> <input type="button" onclick="est_ven_vendedor();" value="Vendas por Vendedor"> <input type="button" onclick="est_ven_produto();" value="Vendas por Produto"> <input type="button" onclick="est_ven_data();" value="Vendas por data">\n<br>\n<span id="stats_results"></span>\n'}
function est_ven_cliente(){for(var a=objetos[2].valores.map(function(a){return a.nome}),b=JSON.parse(arrayEstatisticas()),c=[],d={i$19:0};d.i$19<a.length;d={i$19:d.i$19},d.i$19++){for(var e=0,f=b.filter(function(b){return function(c){return c.cliente===a[b.i$19]}}(d)),g=0;g<f.length;g++)e+=+f[g].valor_total;c.push({nome:a[d.i$19],vendas:f.length,valor_total:e.toFixed(2)})}b="";for(d=0;d<c.length;d++)b+="<p>Nome: "+c[d].nome+" Vendas: "+c[d].vendas+" Valor total: R$ "+c[d].valor_total+" </p>";document.getElementById("stats_results").innerHTML=
"<br>\n    "+b+"\n    "}
function est_ven_vendedor(){for(var a=objetos[3].valores.map(function(a){return a.nome}),b=JSON.parse(arrayEstatisticas()),c=[],d={i$22:0};d.i$22<a.length;d={i$22:d.i$22},d.i$22++){for(var e=0,f=b.filter(function(b){return function(c){return c.vendedor===a[b.i$22]}}(d)),g=0;g<f.length;g++)e+=+f[g].valor_total;g=10*e/100;c.push({nome:a[d.i$22],vendas:f.length,valor_total:e.toFixed(2),comissao:g.toFixed(2)})}b="";for(d=0;d<c.length;d++)b+="<p>Nome: "+c[d].nome+" Vendas: "+c[d].vendas+" Valor total: R$ "+
c[d].valor_total+" Comiss\u00e3o:  R$ "+c[d].comissao+"</p>";document.getElementById("stats_results").innerHTML="<br>\n    "+b+"\n    "}
function est_ven_produto(){for(var a=objetos[1].valores.map(function(a){return a.descricao}),b=JSON.parse(arrayEstatisticas()),c=[],d=0;d<b.length;d++)c.push(b[d].produtos);b=[];for(d=0;d<a.length;d++){for(var e=0,f=0;f<c.length;f++)for(var g=0;g<c[f].length;g++)c[f][g][1]===a[d]&&e++;b.push({produto:a[d],vendas:e})}a="";for(c=0;c<b.length;c++)a+="<p>Produto: "+b[c].produto+" Total de vendas: "+b[c].vendas+"<br></p>";document.getElementById("stats_results").innerHTML="<br>\n    "+a+"\n    "}
function est_ven_data(){for(var a=JSON.parse(arrayEstatisticas()),b=a.map(function(a){return a.data_da_venda}).filter(function(a,b,c){return c.indexOf(a)===b}).reverse(),c=[],d={i$29:0};d.i$29<b.length;d={i$29:d.i$29},d.i$29++){for(var e=0,f=a.filter(function(a){return function(c){return c.data_da_venda===b[a.i$29]}}(d)),g=0;g<f.length;g++)e+=+f[g].valor_total;c.push({data:b[d.i$29],quantidade:f.length,valor_total:e.toFixed(2)})}a="";for(d=0;d<c.length;d++)a+="<p>Data: "+c[d].data+" N\u00famero de vendas: "+
c[d].quantidade+" Total de vendas: R$ "+c[d].valor_total+"</p>";document.getElementById("stats_results").innerHTML="<br>\n    "+a+"\n    "};
